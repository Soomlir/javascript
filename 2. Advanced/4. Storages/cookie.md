# Cookie
`document.cookie` — это свойство объекта `document`, которое позволяет работать с cookies (куки) в браузере. 
  
Cookies — это небольшие фрагменты данных, которые веб-сайт сохраняет на устройстве пользователя. Они могут хранить информацию о предпочтениях, сессиях, авторизации пользователя и других данных.

## Зачем нужны cookies?
Cookies используются для множества целей, включая:
1. `Хранение сессий`: Cookies помогают сохранять информацию о сессии пользователя (например, данные о входе на сайт), чтобы при последующих посещениях сайта пользователь не должен был заново вводить свои данные.
2. `Персонализация`: С помощью cookies можно запомнить предпочтения пользователя, например, язык интерфейса или тему оформления.
3. `Аналитика`: Cookies могут использоваться для сбора данных о поведении пользователей на сайте, например, о страницах, которые они посещают, времени пребывания и т.д.
4. `Реклама`: Рекламные сети могут использовать cookies для показа таргетированной рекламы в зависимости от интересов пользователя.

## Формат и структура cookies
Cookie состоит из пары "ключ-значение", и обычно он выглядит так:
```pgsql
name=value; expires=date; path=/; domain=example.com; secure; HttpOnly
```

- `name=value`: обязательная пара, где `name`— это имя cookie, а `value` — его значение.
- `expires`: дата, до которой cookie будет действовать. Если не указано, cookie живёт до конца сессии (пока не закрыт браузер).
- `path`: путь на сайте, для которого этот cookie доступен.
- `domain`: домен, для которого этот cookie доступен.
- `secure`: cookie будет передаваться только через HTTPS.
- `HttpOnly`: cookie не будет доступен через JavaScript, его можно будет использовать только через HTTP-запросы (это важно для безопасности).
- `SameSite`: помогает предотвратить CSRF-атаки (Cross-Site Request Forgery).

## Пример работы с cookies
Запись cookie:
```js
document.cookie = "user=Alice; expires=Fri, 31 Dec 2025 23:59:59 GMT; path=/";
```

Чтение всех cookies:
```js
let cookies = document.cookie;
console.log(cookies); // Пример: "user=Alice; session=abc123"
```

Извлечение конкретной cookie:
```js
function getCookie(name) {
    let matches = document.cookie.match(new RegExp(
        "(?:^|; )" + name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"
    ));
    return matches ? decodeURIComponent(matches[1]) : undefined;
}
console.log(getCookie("user")); // Alice
```

Удаление cookie:
```js
document.cookie = "user=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/";
```

## Важные моменты
1. `Ограничения на размер cookies`: каждый cookie имеет ограничение по размеру (обычно около 4 КБ), и браузеры могут хранить не более 20–50 cookies на домен.
2. `Безопасность`: важно понимать, что cookies могут быть использованы для хранения чувствительной информации, такой как токены доступа или пароли. Использование флагов `HttpOnly` и `Secure` помогает повысить безопасность cookies.
3. `Третичные cookies (third-party cookies)`: это cookies, установленные не самим веб-сайтом, а сторонними сервисами, например, рекламными сетями. Многие браузеры начали блокировать сторонние cookies из соображений конфиденциальности.
